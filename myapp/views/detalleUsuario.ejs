<!DOCTYPE html>
<html lang="es">
  <%- include('./partials/head') %>
  <body>
    <% if (locals.user != undefined) { %>
      <%- include('./partials/headerLogueado') %>
    <% } else { %>
      <%- include('./partials/header') %>
    <% } %>

    <!-- PERFIL DE USUARIO -->
    <section class="info-user container products-wrapper">
      <div class="row">
        <div class="img-container offset-3 col-2">
          <img 
            src="<%= listaAboutUsuario.profilePhoto %>" 
            alt="Foto de perfil" 
            class="foto-perfil">
        </div>
        <div class="data-container col-6">
          <div class="d-flex align-items-center">
            <h1 class="main-title"><%= listaAboutUsuario.username %></h1>
            <% if (locals.user && locals.user.id == listaAboutUsuario.id) { %>
              <a class="btn mt-3 ml-4" href="/users/editarPerfil/id/<%= listaAboutUsuario.id %>">EDITAR PERFIL</a>
            <% } else { %>
              <a class="btn mt-3 ml-4" href="#">SEGUIR</a>
            <% } %>
          </div>
          <ul>
            <li><strong>Email:</strong> <%= listaAboutUsuario.email %></li>
            <li><strong>Productos publicados:</strong> <%= totalProductos %></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PRODUCTOS DEL USUARIO -->
    <div class="container products-wrapper mt-5">
      <div class="row">
        <div class="col-12">
          <h2 class="products-title">Productos</h2>
        </div>

        <% for (let i = 0; i < listaProductos.length; i++) { %>
          <div class="col-12 col-sm-6 col-lg-3">
            <section class="product-box">
              <a href="/products/<%= listaProductos[i].id %>">
                <figure class="product-box_image">
                  <img 
                    src="<%= listaProductos[i].imageFilename ? listaProductos[i].imageFilename : '/images/default-product.png' %>" 
                    alt="<%= listaProductos[i].name %>">
                </figure>
                <article class="product-box_data">
                  <h2><%= listaProductos[i].name %></h2>
                  <p><%= listaProductos[i].description %></p>
                </article>
              </a>
            </section>
          </div>
        <% } %>
      </div>
    </div>

    <%- include('./partials/footer') %>
  </body>
</html>





